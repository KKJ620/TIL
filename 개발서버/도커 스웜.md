### 도커 스웜

------

도커 스웜을 사용하는 이유

하나의 호스트 머신에서 도커 엔진을 구동하다가 CPU나 메모리, 디스크 용량과 같은 자원이 부족하면 어떻게 해결할까?

답 : 여러 대의 서버를 클러스터로 만들어 자원을 병렬로 확장한다

여러 대의 서버를 하나의 자원 풀로 만드는 것을 도와주는 **'도커 스웜(스웜 클래식)'**, **'스웜 모드'**

도커 스웜(스웜 클래식) : 컨테이너로서의 스웜

차이점

스웜 클래식 : 여러 대의 도커 서버를 하나의 지점에서 사용하도록 단일 접근점을 제공, 일반적인 도커 명령어와 도커 API로 클러스터의 서버를 제어하고 관리할 수 있는 기능 제공

스웜 모드: 마이크로서비스 아키텍처의 컨테이너를 다루기 위한 클러스터링 기능에 초점을 맞춤, 같은 컨테이너를 동시에 여러 개 생성해 필요에 따라 유동적으로 컨테이너의 수를 조절할 수 있으며, 컨테이너로의 연결을 분산하는 로드밸런싱 기능을 자체적으로 지원함. 스웜 모드가 스웜 클래식보다 서비스 확장성과 안정성 등 여러 측면에서 더 뛰어나므로 일반적으로 스웜모드를 더 많이 사용함

> 서버 클러스터링을 할 때에는 반드시 각 서버의 시각을 NTP 등의 툴을 이용해 동기화해야 한다. 서버 간에 설정된 시각이 다를 경우 예상치 못한 오류가 나타날 수도 있다

![Docker 가상 환경 구축 입문 (15) - Swarm의 서비스와 태스크](https://i.imgur.com/VLnzFUA.png)

스웜 모드는 매니저 노드와 워커(Worker)노드로 구성

워커 노드 : 실제로 컨테이너가 생성되고 관리되는 도커 서버

매니저 노드 : 워커 노드들을 관리하기 위한 도커 서버, 매니저 노드에도 컨테이너가 생성될 수 있다. 매니저 노드는 기본적으로 워커 노드의 역할을 포함한다.

매니저 노드의 개수는 홀수가 좋다. 매니저 노드의 개수를 홀수로 구성하면 짝수로 구성했을 때보다 매니저 노드의 장애를 더 허용할 수 있으며 매니저 노드 사이의 데이터 일관성을 유지할 수 있음